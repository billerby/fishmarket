#{extends 'main.html' /}
#{set title:'Prisnoteringar' /}
#{if paginator != null && paginator.size() != 0}

<style>
input[type=text] { width: 100%; box-sizing: border-box; height: 30px; position: relative; margin: 0 auto;}

</style>
<div class="row-fluid">
	<div class="span5">
		<h2>&{'quotations.header'}</h2>
	</div>
	<div class="span2">
		#{form @Prices.search()}
		<div class="input-append date" id="datepicker" data-date="${dateToFetchString}" data-date-format="yyyy-mm-dd">
  			<input id="input-datepicker" type="text" value="${dateToFetchString}">
  			<span class="add-on"><i class="icon-calendar"></i></span>
		</div>
		#{/form}
	</div>
</div>

<div class="row-fluid">
	<div class="span7">
		<table class="table table-hover">
	    	<thead>
	    		<tr>
	    			<th>&{'quotations.nameOfSpecies'}</th>
	    			<th>&{'quotations.boxes'}</th>
	    			<th>&{'quotations.kilos'}</th>
	    			<th>&{'quotations.averagePrice'}</th>
	    			<th>&{'quotations.maxPrice'}</th>
	    		</tr>
	    	</thead>
	    	<tbody>
	    		#{paginate.list items:paginator, as:'quotation'} 
			    <tr>
				    <td>${quotation.species.name}</td>
				    <td>${quotation.boxes}</td>
				    <td>${quotation.kilos}</td>
				    <td>${quotation.avgPrice}</td>
				    <td>${quotation.maxPrice}</td>
			    </tr>
			     #{/paginate.list}
	    	</tbody>
	    </table>
	     #{paginate.controls items:paginator /} 
	</div>
</div>		
#{/if}
#{else}
<div class="row-fluid">
	<div class="span9">
		<div class="alert">
			<button class="close" data-dismiss="alert"><i class="icon-remove"></i></button>
			&{'quotations.noneFound'} ${dateToFetchString}
		</div>
	</div>
</div>

#{/else}

<script type="text/javascript">
	$(document).ready( function() {
		$('#datepicker').datepicker({
			format: 'yyyy-mm-dd',
			weekStart: 1,
			daysOfWeekDisabled:[0,6],
			language:'sv',

		}).on('changeDate', function(ev){			
			var d = $('#input-datepicker').val();
			window.location.href='/prices/list/'+d.toString('yyyy-MM-dd');
		});
	});

	var changeDateDay = function (_direction){
		var d = Date.parse($('#input-datepicker').val());
		var tomorrow = new Date();
		if (_direction)
			d.add(1).days()
		else 
			d.add(-1).days();			
		window.location.href='/list/'+d.toString('yyyy-MM-dd');

	}


</script>